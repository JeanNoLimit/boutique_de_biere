{% extends 'base.html.twig' %}

{% block title %}la  Boutique{% endblock %}

{% block body %}

<a href="{{path('products_index')}}"> Retour boutique</a>
<div class="product_presention">

    <div class="img_detail_product">
      {% if product.imageFile is defined and product.imageFile is not null %}
        <img src="{{ asset('upload/images/products/'~ product.imageFile) }}" alt="image {{product.designation}}">     
      {% else %}
        <img src="{{ asset('upload/images/site/' ~ parameters.defaultImageProduct) }}" alt="image par défaut">
      {% endif %}
    </div>
    <div class="product_informations">
        <h1 class="product_designation">{{product.designation}} - {{ product.volume|number_format }}cl</h1>
        <p class="description_product">{{ product.description }}</p>
        <p class="product_price_detail_product">{{ (product.price ?? 0 / 100)|number_format(2, ',', '.' ) }} € T.T.C.</p>
        <p class="product_liter_price"> (11.96 € le litre) </p>
      {% if product.stock <= 10 and product.stock > 0 %}
        {% if product.stock == 1 %}
           <p> Il reste 1 article en stock</p
        {% else %}
            <p> Il reste {{product.stock }} articles en stock</p>
        {% endif %}
      {% elseif product.stock <= 0 %}
        <p> Rupture de stock - Commande possible mais délais de livraison allongé </p>
      {% endif %}

        {# FORMULAIRE AJOUT PRODUIT AU PANIER #}
        {# <form action="" method="post">
            <div class="form_detail_product">
                <div class="form_select_qte">
                    <label for="quantity" > Quantité </label>
                    <div class="select_qte">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="minus" fill="var(--main-color)"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"/></svg>
    
                        <input type="number" name="quantity" id="quantity" class="input_number" min="1" max="99" step="1" > 
    
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="plus" fill="var(--main-color)"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg> 
                    </div>   
                </div>
                <button class="button_validation"> Ajouter au panier</button>
            </div>
        </form> #}

       
        {{ form_start(form,  {'action': path('cart_add', {'id' : product.id})} )}}
            <div class="form_detail_product"> 
                <div class="form_select_qte">
                    {{ form_label(form.quantity)}}
                    <div class="select_qte">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="minus" fill="var(--main-color)" id="minusForm"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"/></svg>
                        {{ form_widget(form.quantity)}}
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="plus" fill="var(--main-color)" id="plusForm"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg> 
                    </div>   
                </div>
                {{ form_row(form.envoyer) }}
            </div>
        {{ form_end(form) }}
    </div>
</div>

<div class="further_informations">
    <h2>Informations détaillées</h2>

    <table class="table_futher_informations">
        <tbody>
            <tr>
              <td>Brasserie</td>
              <td> {{ product.provider.name }}</td>
            </tr>
            <tr>
              <td>Ingrédients</td>
              <td> {{ product.ingredients }}</td>
            </tr>
            <tr>
              <td>Taux d'alcool</td>
              <td> {{product.alcoholLevel}} °C </td>
            </tr>
            {% if product.bitterness is defined and product.bitterness is not null %}
                  <tr>
                    <td>Amertume</td>
                    <td> {{ product.bitterness }} </td>
                  </tr>
            {% endif %}
        
            <tr>
              <td>Style</td>
              <td> 
                {% for beerType in product.beerTypes %}
                  {% if product.beerTypes|length == 1 or beerType == product.beerTypes|last %}
                    {{beerType.name}}   
                  {% else %}
                    {{beerType.name}},       
                  {% endif %}
                  
                {% endfor %} 
              </td>
            </tr>
          </tbody>
    </table>
</div>



{# ....COMING SOON.... #}

<div class="review">
 <h2>Avis</h2>
 <p style="text-align:center;"> ******* COMING SOON *******</p>
</div>

{% endblock %}